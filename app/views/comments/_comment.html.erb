<div class="comment mb-3">
<div class="media-box">
  <div class="bgstr"><%= fa_icon 'envelope' %></div>

  <div class="media-content">
    <% if defined?(light) %>
      <%= comment.text  %>
    <% elsif defined?(heavy) %>
      <div class="media-text-xl"><%= comment.text  %></div>
    <% else %>
      <div class="media-text-l"><%= comment.text  %></div>

      <div class="media-toolbox cf">

        <div id="toggle_comment_<%= comment.id %>_read_flag" class="tool <%= 'active' if comment.read_flag %>">
          <%= link_to fa_icon('check', text: '既読'), comment_path(comment, params: { comment: { read_flag: 'toggle' } }), method: :put, remote: true %>
        </div>
        <div id="toggle_comment_<%= comment.id %>_favor_flag" class="tool <%= 'active' if comment.favor_flag %>">
          <%= link_to fa_icon('star', text: 'お気に入り'), comment_path(comment, params: { comment: { favor_flag: 'toggle' } }), method: :put, remote: true %>
        </div>
        <div id="toggle_comment_<%= comment.id %>_muted" class="tool <%= 'active' if comment.muted %>">
          <%= link_to fa_icon('eye-slash', text: 'ミュート'), comment_path(comment, params: { comment: { muted: 'toggle' } }), method: :put, remote: true %>
        </div>
        <%= link_to '詳細', comment_path(comment), class: "comment-link" %>
      </div>
    <% end %>

    <div class="media-footer">
      <span><%= smart_time_to_str(comment.created_at) %></span>
      <% unless comment.from_user.nil? || comment.secret_anonimity? %>
        <span class="media-footer-right">by <%= comment.from_user.name %></span>
      <% end %>
    </div>

    <% if !defined?(hide_response) && comment.response_post %>
      <span class="text-muted"><%= fa_icon 'reply', text: 'このコメントに対する返信', class: 'mt-3' %></span>
      <%= render 'tweet_posts/tweet_post', {tweet_post: comment.response_post, light: true, hide_response: true} %>
    <% end %>
  </div>
</div>
</div>
